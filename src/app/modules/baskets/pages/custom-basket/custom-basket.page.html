<ng-container *ngIf="pools$ | async as pools">
  <div>
    <label for="searchPools">Search pools</label>
    <input
      id="searchPools"
      [(ngModel)]="poolsSearchVal"
      type="text"
      class="form-control w-25" />
  </div>
  <div *ngFor="let pool of pools.slice(0, 10) | filter: 'Symbol':poolsSearchVal">
    {{ pool.Platform }} - {{ pool.Symbol }}
    <button
      *ngIf="Object.keys(chartPoolData).length < COMPOSITION_LIMIT && !chartPoolData[pool.Symbol]"
      class="btn btn-primary"
      (click)="addPool(pool.Symbol)">Add Pool to Basket
    </button>
    <button class="btn btn-secondary" *ngIf="chartPoolData[pool.Symbol]" (click)="removePool(pool.Symbol)">
      Remove Pool
    </button>
    <mat-slider
      [disabled]="disableSlider()"
      *ngIf="chartOptions && chartPoolData[pool.Symbol] >= 0"
      min="1" max="99"
      thumbLabel
      [displayWith]="formatSliderLabel"
      (valueChange)="editBasketAllocation(pool.Symbol, $event)"
      [value]="chartPoolData[pool.Symbol]"></mat-slider>
  </div>
</ng-container>

<ng-container *ngIf="chartOptions && Object.keys(chartPoolData).length > 0; else emptyChartsTemplate">
  <div>
    <apx-chart
      [series]="chartOptions.series"
      [chart]="chartOptions.chart"
      [dataLabels]="chartOptions.dataLabels"
      [plotOptions]="chartOptions.plotOptions"
      [yaxis]="chartOptions.yaxis"
      [xaxis]="chartOptions.xaxis"
      [fill]="chartOptions.fill"
      [title]="chartOptions.title"
    ></apx-chart>
  </div>
</ng-container>

<ng-template #emptyChartsTemplate>
  <h2>Add a pool to allocate funds</h2>
</ng-template>
